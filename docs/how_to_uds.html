<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>UDS Files - Uncrustify Documentation Project</title>
  <link rel="stylesheet" href="static/uncrustify.css">
  <style>
    table, th, td {
      margin: 10px;
      padding: 0 1em;
      border: 1px solid;
      border-collapse: collapse;
      vertical-align: top;
    }
  </style>
</head>
<body>
<a href="./" style="text-decoration: none;"><img src="./static/home-16.png"> home</a>
<hr>
<h1>How to improve/write an .uds file</h1>
<p>
An Uncrustify Documentation Script (UDS) is a text file used to
drive the execution of uncrustify with various values of the same option.
</p>
<p>
80% of what you need to know is in this table:
</p>
<table>
<tr>
  <th rowspan="2">Syntax</th>
  <th colspan="3">Examples</th>
</tr><tr>
  <th>align_func_params.uds</th>
  <th>nl_after_if.uds</th>
  <th>cmt_reflow_mode.uds</th>
</tr><tr>
  <td><pre>
==== NAME &lt;option_name>
==== CODE
  ... valid C/C++/Java code ...
==== SET &lt;option_name>=&lt;value1>
==== SET &lt;option_name>=&lt;value2>
==== SET &lt;option_name>=&lt;value3>
    </pre>
  </td>
  <td><pre>
==== NAME align_func_params
==== CODE
void main(void){
    puts("Hello world!");
}
==== SET align_func_params=false
==== SET align_func_params=true
    </pre>
  </td><td><pre>
==== NAME: nl_after_if
==== CODE
void main(void){
    puts("Hello world!");
}
==== SET nl_after_if=ignore
==== SET nl_after_if=add
==== SET nl_after_if=remove
==== SET nl_after_if=force
==== SET nl_after_if=not_defined
    </pre>
  </td><td><pre>
==== NAME: cmt_reflow_mode
==== CODE
void main(void){
    puts("Hello world!");
}
==== SET cmt_reflow_mode=0
==== SET cmt_reflow_mode=1
==== SET cmt_reflow_mode=2
    </pre>
  </td>
</tr>
</table>
<p>
- The name of the file must be &lt;option_name>.uds Example: align_func_params.uds<br/>
and the line "==== NAME &lt;option_name>" must be inline with the file it belongs to.
</p>
<p>
- By default the CODE section is selected by an algorithm based on the option name.<br/>
For example, the option 'indent_else_if' will trigger the use of a piece of code with if/else structures.<br/>
But there are many reasons why the code chosen is wrong or not optimal.<br/>
This is where YOU (reader) have a role to play in this project, by providing an uds file with a better code section.
</p>
<p>
- The "=== SET &lt;option_name>=&lt;value>" lines list all the possible values for this option.
</p>
<p>
When the doc for an option is generated, the CODE section of the uds file is submitted to uncrustify
with an empty configuration and with every SET line:</p>
<pre>
  uncrustify -c -  --set cmt_reflow_mode=0
  uncrustify -c -  --set cmt_reflow_mode=1
  uncrustify -c -  --set cmt_reflow_mode=2
</pre>
<p>
The output of each execution, is included in the page dedicated to this option, along with the original CODE.
</p>

<h1>Level 2</h1>
<ul>

<li>You can add an INFOrmation section to the .uds file
<p><pre>
==== INFO
  optimized by Trucmuche on 2024/02/29
  See comment by Riton in issue 1234 github.com/...
</pre>
This section will be displayed after the "Examples" on the option page.
<p>

<li>You can SET more than one option.
<p><pre>
==== SET &lt;option_name>=&lt;value> &lt;option_name_A>=&lt;value1> &lt;option_name_B>=&lt;value2>
</pre>
This is required when the effect of the option depends on the value of other options.
</p>

<li>You can specify the language used in the CODE section.
<p><pre>
==== CODE JAVA
import java.awt.*;
...
</pre>
The default is CPP.<br/>
The valid values are: C CPP C++ D CS C# JAVA PAWN OC OC+ VALA.
</p>

</ul>

<h1>Last but not least...</h1>
<p>
Provide your uds file in a comment and/or in a pull request > <a href="https://github.com/JEAYNE/Uncrustify-Documentation-Project" target="home">here</a> &lt;
</p>
<p>
IMPORTANT:
<ul>
  <li>The goal of an .uds file is to show the effect of only one option. Don't expect a full formated result in the final examples.
  <li>The output generated by an .uds file if based on:
    <ul>
      <li> an empty configuration
      <li> --set indent_with_tabs=0 --set indent_columns=4
      <li> a SET provided by the uds file
    </ul>
  <li>Even with an empty configuration a few options have a value that is not the <i>usual</i> default value ('false', 'ignore', '0').
    See <a href="index_default.html">list here</a>.
  <li>If you think the output generated by uncrustify is invalid you should first contact the
    <a href="https://github.com/uncrustify/uncrustify">Uncrustify team</a>.<br/>
    Here, we document the output, whether it's good or bad ;-)
</ul>
<hr>
<a href="./" style="text-decoration: none;"><img src="./static/home-16.png"> home</a>
</body>
</html>
